@model OrderLunchWeb.Models.Store

@{
    ViewData["Title"] = "刪除店家";
}

<div class="container mt-4">
    <!-- 標題 -->
    <div class="mb-4">
        <h1 class="display-4 text-danger">
            <i class="bi bi-exclamation-triangle-fill"></i> 刪除店家
        </h1>
    </div>

    <!-- 警告訊息 -->
    <div class="alert alert-danger shadow-sm" role="alert">
        <h4 class="alert-heading">
            <i class="bi bi-exclamation-circle-fill"></i> 警告：此操作無法復原！
        </h4>
        <p class="mb-0">
            您確定要刪除此店家嗎？刪除後所有相關資料將永久移除，此操作無法復原。
        </p>
    </div>

    <!-- 店家資訊卡片 -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-danger text-white">
            <h3 class="mb-0">
                <i class="bi bi-shop"></i> @Model.Name
            </h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div class="info-item">
                        <h5 class="text-muted mb-2">
                            <i class="bi bi-geo-alt-fill"></i> 地址
                        </h5>
                        <p class="fs-5">@Model.Address</p>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="info-item">
                        <h5 class="text-muted mb-2">
                            <i class="bi bi-telephone-fill"></i> 聯絡電話
                        </h5>
                        <p class="fs-5">
                            @(Model.PhoneType == OrderLunchWeb.Models.PhoneType.Landline ? "市話" : "行動電話")：@Model.Phone
                        </p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div class="info-item">
                        <h5 class="text-muted mb-2">
                            <i class="bi bi-clock-fill"></i> 營業時間
                        </h5>
                        <p class="fs-5">@Model.BusinessHours</p>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="info-item">
                        <h5 class="text-muted mb-2">
                            <i class="bi bi-card-list"></i> 菜單項目數量
                        </h5>
                        <p class="fs-5">@Model.MenuItems.Count 項</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div class="info-item">
                        <h5 class="text-muted mb-2">
                            <i class="bi bi-calendar-plus"></i> 建立時間
                        </h5>
                        <p class="fs-6">@Model.CreatedAt.ToString("yyyy/MM/dd HH:mm:ss")</p>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="info-item">
                        <h5 class="text-muted mb-2">
                            <i class="bi bi-calendar-check"></i> 最後更新時間
                        </h5>
                        <p class="fs-6">@Model.UpdatedAt.ToString("yyyy/MM/dd HH:mm:ss")</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 菜單項目摘要 -->
    @if (Model.MenuItems != null && Model.MenuItems.Count > 0)
    {
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-warning">
                <h4 class="mb-0">
                    <i class="bi bi-card-list"></i> 即將刪除的菜單項目 (@Model.MenuItems.Count 項)
                </h4>
            </div>
            <div class="card-body">
                <div class="row">
                    @foreach (var item in Model.MenuItems)
                    {
                        <div class="col-md-4 mb-2">
                            <div class="d-flex align-items-center">
                                <i class="bi bi-arrow-right-circle text-danger me-2"></i>
                                <span>@item.Name - NT$@item.Price</span>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    }

    <!-- 操作按鈕 -->
    <form asp-action="Delete" method="post">
        <input type="hidden" asp-for="Id" />
        @Html.AntiForgeryToken()
        
        <div class="d-flex justify-content-between align-items-center mt-4">
            <a asp-action="Index" class="btn btn-secondary btn-lg">
                <i class="bi bi-x-circle"></i> 取消
            </a>
            <div>
                <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-info btn-lg me-2">
                    <i class="bi bi-info-circle"></i> 檢視詳情
                </a>
                <button type="submit" class="btn btn-danger btn-lg">
                    <i class="bi bi-trash-fill"></i> 確認刪除
                </button>
            </div>
        </div>
    </form>

    <!-- 補充說明 -->
    <div class="mt-4">
        <div class="card border-warning">
            <div class="card-body">
                <h5 class="card-title text-warning">
                    <i class="bi bi-info-circle"></i> 注意事項
                </h5>
                <ul class="mb-0">
                    <li>刪除後，此店家的所有資訊（包括菜單項目）將永久移除</li>
                    <li>已刪除的店家 ID 將不會被重複使用</li>
                    <li>若不確定是否要刪除，建議先返回列表或檢視詳情</li>
                </ul>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // 刪除確認的額外提示
        document.querySelector('form').addEventListener('submit', function(e) {
            const storeName = '@Html.Raw(Model.Name)';
            const confirmed = confirm(`您確定要刪除「${storeName}」嗎？此操作無法復原！`);
            if (!confirmed) {
                e.preventDefault();
            }
        });
    </script>
}
